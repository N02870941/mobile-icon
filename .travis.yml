sudo: required

services:
  - docker

script:
  - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
  - docker build -t jabaridash/mobile-icon .
  - |
    docker run                                         \
    -d                                                 \
    -p 8080:80                                         \
    --name mobile-icon                                 \
    jabaridash/mobile-icon
  - sleep 5
  - docker ps -a
  - npm test
  - docker push jabaridash/mobile-icon

on:
  branch: master
